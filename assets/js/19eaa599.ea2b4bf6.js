"use strict";(self.webpackChunkvirtualclient=self.webpackChunkvirtualclient||[]).push([[1560],{3388:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var s=n(5893),r=n(3905);const i={},o="Workload Development Recommendations",a={id:"developing/0060-develop-workload",title:"Workload Development Recommendations",description:"The following documentation provides guidance on the practices and fundamentals that the CRC team recommends for teams who want to create workloads to",source:"@site/docs/developing/0060-develop-workload.md",sourceDirName:"developing",slug:"/developing/0060-develop-workload",permalink:"/VirtualClient/docs/developing/0060-develop-workload",draft:!1,unlisted:!1,editUrl:"https://github.com/microsoft/VirtualClient/edit/main/website/docs/developing/0060-develop-workload.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Profiler Integration",permalink:"/VirtualClient/docs/developing/0050-develop-profiling-monitor"},next:{title:"Building Docker Containers",permalink:"/VirtualClient/docs/developing/0061-build-docker-container"}},l={},d=[{value:"Terminology",id:"terminology",level:2},{value:"Workload",id:"workload",level:4},{value:"CRC Flighting System",id:"crc-flighting-system",level:4},{value:"Virtual Client",id:"virtual-client",level:4},{value:"Addressable Fleet",id:"addressable-fleet",level:4},{value:"Compute Nodes",id:"compute-nodes",level:4},{value:"Utility Nodes",id:"utility-nodes",level:4},{value:"Storage Nodes",id:"storage-nodes",level:4},{value:"General Purpose SKU",id:"general-purpose-sku",level:4},{value:"Special Purpose SKU",id:"special-purpose-sku",level:4},{value:"Payload",id:"payload",level:4},{value:"Goals for Creating a Good Workload",id:"goals-for-creating-a-good-workload",level:2},{value:"Runs Consistently Reliable Tests",id:"runs-consistently-reliable-tests",level:4},{value:"Runs Consistently Repeatable Tests",id:"runs-consistently-repeatable-tests",level:4},{value:"Produces Objective Results",id:"produces-objective-results",level:4},{value:"Produces Structured Results",id:"produces-structured-results",level:4},{value:"Is Easy to Integrate with Other Systems",id:"is-easy-to-integrate-with-other-systems",level:4},{value:"Workload Recipe",id:"workload-recipe",level:2},{value:"Create the workload as a simple command-line tool",id:"create-the-workload-as-a-simple-command-line-tool",level:4},{value:"The workload should be written in a cross-platform programming/scripting language",id:"the-workload-should-be-written-in-a-cross-platform-programmingscripting-language",level:4},{value:"The workload should be parameterized",id:"the-workload-should-be-parameterized",level:4},{value:"The workload should be designed to produce a consistent steady-state test",id:"the-workload-should-be-designed-to-produce-a-consistent-steady-state-test",level:4},{value:"The workload should run the exact same test every time given exact settings",id:"the-workload-should-run-the-exact-same-test-every-time-given-exact-settings",level:4},{value:"The workload should produce highly structured results",id:"the-workload-should-produce-highly-structured-results",level:4},{value:"The workload should handle any setup or dependency installation requirements where possible",id:"the-workload-should-handle-any-setup-or-dependency-installation-requirements-where-possible",level:4},{value:"The workload should be provided as a versioned package",id:"the-workload-should-be-provided-as-a-versioned-package",level:4}];function h(e){const t={a:"a",br:"br",h1:"h1",h2:"h2",h4:"h4",li:"li",p:"p",ul:"ul",...(0,r.ah)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"workload-development-recommendations",children:"Workload Development Recommendations"}),"\n",(0,s.jsx)(t.p,{children:"The following documentation provides guidance on the practices and fundamentals that the CRC team recommends for teams who want to create workloads to\nrun as part of CRC Flighting system experiments. The overarching goal of these recommendations is to create a recipe for the creation of workloads that\ncan be easily developed and easily integrated into the CRC Flighting system via the Virtual Client workload provider."}),"\n",(0,s.jsx)(t.h2,{id:"terminology",children:"Terminology"}),"\n",(0,s.jsx)(t.p,{children:"The following pieces of terminology are used often to describe CRC Flighting system experiments and workloads."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"workload",children:"Workload"}),"\n",(0,s.jsx)(t.p,{children:"These are special agents/toolsets/software that CRC runs on blades or VMs as part of a flighting experiment that were designed to represent the experience of a\ncustomer. The CRC team runs workloads to capture various reliability and performance metrics from the system while a payload/change is being applied to\nthe physical node/system underneath. These metrics, when compiled in large datasets, allow the CRC team to accurately analyze the real net impact of a\ngiven change on the overall customer experience."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"crc-flighting-system",children:"CRC Flighting System"}),"\n",(0,s.jsx)(t.p,{children:"The execution system that provides the automation to conduct firmware/hardware A/B experiments at-scale in the production Azure fleet."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"virtual-client",children:"Virtual Client"}),"\n",(0,s.jsx)(t.p,{children:"The Virtual Client is the customer-representative workload provider for the CRC Flighting system. It is an executable that abstracts the complexities of\nrunning workloads from the flighting execution system providing the integration point for new customer/partner workloads that will be ran in\nthe flighting system. The Virtual Client additionally ensures standardization in capturing system performance information as well as telemetry that\nis emitted as part of workloads running in CRC experiments."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"addressable-fleet",children:"Addressable Fleet"}),"\n",(0,s.jsx)(t.p,{children:"The CRC team focuses on the addressable Azure fleet. Fleet nodes that are addressable exist in clusters that are fully online for use by either\ninternal Azure teams or public customers. Clusters are qualified as online when all of the cluster fabric services are enabled including the TiP\nservice. The cluster fabric services are required to be enabled in order to properly manage nodes within the cluster including the ability for\nusers/customers to request cloud resources via ARM (Azure Resource Manager)."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"compute-nodes",children:"Compute Nodes"}),"\n",(0,s.jsx)(t.p,{children:"Compute nodes are designed to host VMs as a general rule. Many of the Azure services that run in the cloud and that we offer customers rely on VMs\nin whole or in part to host the software that implements the services being provided. CRC largely focuses on compute nodes because they are the nodes\ndirectly used by customers and that have the most direct impact on their experience."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"utility-nodes",children:"Utility Nodes"}),"\n",(0,s.jsx)(t.p,{children:"Utility nodes are designed primarily to host cluster fabric services use to manage the cluster itself. They do not host customer services or workloads.\nThe CRC team does not currently focus on utility nodes. However, the team is actively working to extend fleet coverage targets to include utility nodes\nwithin the Cobalt semester."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"storage-nodes",children:"Storage Nodes"}),"\n",(0,s.jsx)(t.p,{children:"Storage nodes are designed primarily to integrate with large arrays of physical disks (JBODs). They do not host customer services or workloads. Compute\nnodes often use storage nodes to provide for customer storage necessities (e.g. storage of the VHD file). Storage nodes are not supported by either the\nTiP service nor the ARM service and often run a different OS than compute nodes. Because of these distinctions, CRC cannot currently target storage nodes\nfor flighting validations. With that said, there are opportunities here in partnership with the TiP service team where validations on storage nodes would\nbe made possible. In the semesters that follow Cobalt, CRC may amend the current coverage strategy to perform some amount of validations on these SKUs\nwhere it is deemed critical to the business."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"general-purpose-sku",children:"General Purpose SKU"}),"\n",(0,s.jsx)(t.p,{children:"A general purpose SKU represents nodes that are used by customers for everyday compute needs. The vast majority of the Azure fleet are general purpose\nhardware SKUs."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"special-purpose-sku",children:"Special Purpose SKU"}),"\n",(0,s.jsx)(t.p,{children:"Special SKUs are nodes that have hardware components used to enable special computational capabilities for customers. These SKUs for example might have\nmultiple CPU sockets and many cores for high performance computing needs or GPU chips that are specially designed for advanced graphics rendering/gaming\ncapabilities. These SKUs make up a small percentage of the fleet; however, the customers using them pay a lot of money for these capabilities and an\ninterruption to the service on these SKUs typically causes a very substantial impact to the customer. Common special SKU categories include GPC, GPM, GPZ,\nHM, HPC, VHM, DWS, and FPG."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"payload",children:"Payload"}),"\n",(0,s.jsx)(t.p,{children:"A payload is a change that is made to a physical node/system. For example, the deployment of a microcode firmware update is a change to nodes in the\nfleet. In practice, payloads represent updates to the physical infrastructure of the Azure fleet that are often associated with required SLA guarantees\nwe offer Azure customers. They are deployed to systems while they are running and thus carry a significant risk to the interruption of service for Azure\ncustomers. Historically, these changes have been associated with increases in annual interrupt rates (AIR) for Azure customers and are thus the fundamental subject of CRC validations."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"goals-for-creating-a-good-workload",children:"Goals for Creating a Good Workload"}),"\n",(0,s.jsx)(t.p,{children:"The following sections describes some of the goals involved in the creation of a good workload. At a high-level, a good workload:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"runs-consistently-reliable-tests",children:"Runs Consistently Reliable Tests"}),"\n",(0,s.jsx)(t.p,{children:"The test that the workload runs should be consistently reliable. If the test itself cannot consistently produce results time and time again then\nit produces too much variation (noise) for it to be used to accurately gauge the state of a system under test. This is about code quality and defensive\nprogramming in many ways."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"runs-consistently-repeatable-tests",children:"Runs Consistently Repeatable Tests"}),"\n",(0,s.jsx)(t.p,{children:"The tests that the workload runs should be repeatable in the characteristics of the results. This means that the same test ran on the same node/VM\nover and over should produce similar results given nothing has changed on the system under test. This is not to say that the results will be identical\nbut that the standard deviation of the results would be generally small given all other things being equal on the system."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"produces-objective-results",children:"Produces Objective Results"}),"\n",(0,s.jsx)(t.p,{children:"The tests that the workload runs should produce definitive and objective results. The results should not make estimations as a general rule but should\ninstead attempt to measure facets of the system that are based on hardened and vetted patterns, practices and software. For example, on a Windows system\nthe performance counter and ETW sub-systems are highly refined and reliable. A workload can confidently rely upon performance counters to measure many performance\ncharacteristics of the system in a precise manner."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"produces-structured-results",children:"Produces Structured Results"}),"\n",(0,s.jsx)(t.p,{children:"The results that a good workload produces, will be in a consistently structured format. This makes it easy for the results to be parsed for meaningful\ninsights and aggregations."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"is-easy-to-integrate-with-other-systems",children:"Is Easy to Integrate with Other Systems"}),"\n",(0,s.jsx)(t.p,{children:"A good workload should be easy to use thus making it easy to integrate into the larger execution system. This reduces the overhead required for\nteams to onboard new and valueable test scenarios."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"workload-recipe",children:"Workload Recipe"}),"\n",(0,s.jsx)(t.p,{children:"Given the goals noted above, the following section provides a general recipe that can be followed when creating a workload for easy integrated into\nthe CRC Flighting system. Provided the recipe is followed, it is typically very quick for the CRC team to onboard new workload scenarios which\ncan then produce valuable results at-scale in A/B experiments."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"create-the-workload-as-a-simple-command-line-tool",children:"Create the workload as a simple command-line tool"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"[Option 1]: Create a command line executable."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"All platforms support executables and there is a lot of of pre-existing OS/systems integration support."}),"\n",(0,s.jsx)(t.li,{children:"Command line executables can typically be compiled to support multiple OS platforms (Windows vs. Linux) as well as CPU architectures."}),"\n",(0,s.jsx)(t.li,{children:"Command line executables are easy to port around (e.g. copy, download etc...)."}),"\n",(0,s.jsx)(t.li,{children:"This is the preferred option."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"[Option 2]: Create the workload as a PowerShell Core/7 script or module."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"PowerShell Core/7 is an industrial strength scripting language that can run on both Windows and Linux operating systems."}),"\n",(0,s.jsx)(t.li,{children:"PowerShell has support for multiple CPU architectures."}),"\n",(0,s.jsx)(t.li,{children:"PowerShell scripts and modules are easy to port around (e.g. copy, download etc...)."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Workloads that require GUI support should be avoided."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"They are not easy to integrate into automation workflows and may not even run in certain server OS environments."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Driver-like workloads",(0,s.jsx)(t.br,{}),"\n","For certain workloads that need to run at the Kernel level, it may not be possible to have a traditional executable script to execute the test\nlogic. For these scenarios, it is important that the driver/workload utilize well-known/vetted sub-systems (e.g. performance counters, ETW) in order\nto produce results. The more challenging aspect of these type of workloads is the deployment requirements."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"the-workload-should-be-written-in-a-cross-platform-programmingscripting-language",children:"The workload should be written in a cross-platform programming/scripting language"}),"\n",(0,s.jsx)(t.p,{children:"Whereas it is not always a requirement for certain scenarios, the CRC Flighting system tests on both Windows and Linux systems. A good workload can run\non either of these systems. Indeed a large portion of the VMs used by Azure customers are Linux VMs."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"[Option 1]: Write the workload application in native programming language such as C++."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Native code applications can be compiled to target multiple OS platforms and CPU architectures."}),"\n",(0,s.jsx)(t.li,{children:"Native code applications can be signed as part of Azure Official builds so that they can be run on the Azure physical host itself."}),"\n",(0,s.jsx)(t.li,{children:"The Virtual Client already runs native code executables so there is a precedent in place."}),"\n",(0,s.jsx)(t.li,{children:"This is a preferred option."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"[Option 2]: Write the workload application in .NET Core/5.0."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"The .NET Core/5.0 framework enables applications to be written in a managed coding language such as C# that can be compiled to run on multiple OS\nplatforms and CPU architectures."}),"\n",(0,s.jsx)(t.li,{children:".NET Core/5.0 applications can typically be developed at speed significantly faster than with native programming languages."}),"\n",(0,s.jsx)(t.li,{children:".NET Core/5.0 applications can be signed as part of Azure Official builds so that they can be run on the Azure physical host itself."}),"\n",(0,s.jsx)(t.li,{children:"Many team members in Azure are proficient in managed coding skillsets and thus can contribute to ongoing development needs."}),"\n",(0,s.jsx)(t.li,{children:"The CRC Flighting system and the Virtual Client itself are primarily written in .NET Core/5.0/C# and runs on both VMs (Windows and Linux) as well as Azure hosts (including ARM64 hosts)."}),"\n",(0,s.jsx)(t.li,{children:"The Virtual Client already runs managed code executables so there is a precedent in place."}),"\n",(0,s.jsx)(t.li,{children:"This is a preferred option."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"[Option 3]: Write the workload application in PowerShell Core/7."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"PowerShell Core/7 scripts and modules can run on both Windows and Linux systems."}),"\n",(0,s.jsx)(t.li,{children:"PowersShell Core/7 scripts and modules can be signed as part of Azure Official builds so that they can be run on the Azure physical host itself."}),"\n",(0,s.jsx)(t.li,{children:"The Virtual Client already runs workloads that have bootstrapping/setup needs that are handled with PowerShell scripts so there is a precedent in place."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"[Option 4]: Write the workload application in Python."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Python has a portal execution interpreter/runtime that provides support for both Windows and Linux systems."}),"\n",(0,s.jsx)(t.li,{children:"There may be restrictions that prevent running Python on Azure physical hosts."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"the-workload-should-be-parameterized",children:"The workload should be parameterized"}),"\n",(0,s.jsx)(t.p,{children:"In order to ensure that the workload can support all necessary scenarios and configuration requirements, the workload should allow all important\nsettings to be provided on the command line."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"the-workload-should-be-designed-to-produce-a-consistent-steady-state-test",children:"The workload should be designed to produce a consistent steady-state test"}),"\n",(0,s.jsx)(t.p,{children:'As mentioned in the goals above, the workload should produce consistent and reliable results. The best workloads run a "steady-state" test. A steady state\ntest will run the exact same execution workflow each time given the same settings are provided. The tests should not be based on algorithms that cannot produce\na steady state time and time again. Tests should also avoid testing aspects of the system that are themselves highly variable. Highly variable algorithms or aspects\nwill inevitably produce highly variable results. These results will make it difficult to ascertain differences in the system performance when changes\nare made to the system under test.'}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"the-workload-should-run-the-exact-same-test-every-time-given-exact-settings",children:"The workload should run the exact same test every time given exact settings"}),"\n",(0,s.jsx)(t.p,{children:"Following up on the bullet point above, a workload should run the exact same test every time given a set of specific settings. The tests ran should\nvary only when the settings supplied on the command line have changed."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"the-workload-should-produce-highly-structured-results",children:"The workload should produce highly structured results"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"[Option 1]: Output the results in JSON-format."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"JSON-formatted results are very easy to parse thus making them very easy to integrate."}),"\n",(0,s.jsx)(t.li,{children:"There is a lot of support for JSON in most native and managed programming languages."}),"\n",(0,s.jsx)(t.li,{children:"This is the preferred option."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"[Option 2]: Output the results in XML-format."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"XML-formatted results are easy to parse thus making them easy to integrate."}),"\n",(0,s.jsx)(t.li,{children:"There is a lot of support for XML in most native and managed programming languages."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"[Option 3]: Output the results in CSV(comma-separated value)-format."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"CSV-formatted results are easy to parse thus making them easy to integrate."}),"\n",(0,s.jsx)(t.li,{children:"There is a lot of support for CSV in most native and managed programming languages."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"[Option 4]: Output the results as fixed-width column format."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Fixed-width column results are fairly common and relatively easy to parse."}),"\n",(0,s.jsx)(t.li,{children:"It is best if the results columns are a consistent fixed-width across the board."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"[Option 5]: Use system performance counter subsystems."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Performance counters provide high-precision measurements of system performance and are easy to create on most OS systems."}),"\n",(0,s.jsx)(t.li,{children:"The use of performance counters removes the need to write out any specific results."}),"\n",(0,s.jsx)(t.li,{children:"The Virtual Client has good native support for capturing performance counters at high-precision."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Ideally, results should be provided in standard/console output or returned in a structured object (e.g. PowerShell script scenarios)."}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"It is also ok to write results to a file, but standard/console output is preferred."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"the-workload-should-handle-any-setup-or-dependency-installation-requirements-where-possible",children:"The workload should handle any setup or dependency installation requirements where possible"}),"\n",(0,s.jsx)(t.p,{children:"There is a balance to strike here. For cases where the setup of dependencies can be handled by the workload itself, they should be. The workload\ndeveloper is the expert in the requirements. For certain workloads in the Virtual Client, the dependencies are packaged along with the workload itself.\nThis is perfectly reasonable and often times ideal to ensure exact dependencies are used with the workload. For scenarios where dependencies cannot\nbe easily packaged, have a conversation with the CRC team. There are common dependency download and installation scenarios that are better integrated into\nthe platform than the workload because other workloads share the same/similar requirement."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.h4,{id:"the-workload-should-be-provided-as-a-versioned-package",children:"The workload should be provided as a versioned package"}),"\n",(0,s.jsx)(t.p,{children:"In order to support solid ongoing development and servicing practices, workload applications should be versioned. Additionally, the different\nversions of the workload should be provided via a package store."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"[Option 1]: Provide the workload as a NuGet package"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"NuGet packages are very easy to integrate into development environments and build pipelines."}),"\n",(0,s.jsx)(t.li,{children:"NuGet packages are easy to integrate into Virtual Client runtime scenarios."}),"\n",(0,s.jsx)(t.li,{children:"NuGet packages are easy to create."}),"\n",(0,s.jsx)(t.li,{children:"Azure DevOps provides easy ability to create new/custom NuGet feeds for internal package sharing."}),"\n",(0,s.jsx)(t.li,{children:"This is the preferred option."}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"[Option 2]: Provide the workload as an Azure Blob package"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Azure Blob store packages are easy to integrate into Virtual Client runtime scenarios."}),"\n",(0,s.jsx)(t.li,{children:"Azure Blob storage accounts are easy to create."}),"\n",(0,s.jsx)(t.li,{children:"Even though the package will be stored in Azure Blob, the structure of the package should still\nfollow NuGet schema recommendations."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)(t.p,{children:["See ",(0,s.jsx)(t.a,{href:"/VirtualClient/docs/developing/0040-vc-packages",children:"VC Packages"})," for a more detailed description of how packages are\nexpected to be defined for integration with the Virtual Client."]}),"\n"]}),"\n"]})]})}function c(e={}){const{wrapper:t}={...(0,r.ah)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},3905:(e,t,n)=>{n.d(t,{ah:()=>d});var s=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=s.createContext({}),d=function(e){var t=s.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},h={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},c=s.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),u=d(n),p=r,m=u["".concat(l,".").concat(p)]||u[p]||h[p]||i;return n?s.createElement(m,o(o({ref:t},c),{},{components:n})):s.createElement(m,o({ref:t},c))}));c.displayName="MDXCreateElement"}}]);