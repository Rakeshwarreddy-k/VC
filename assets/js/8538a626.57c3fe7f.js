"use strict";(self.webpackChunkvirtualclient=self.webpackChunkvirtualclient||[]).push([[8762],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>u});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),o=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=o(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),m=o(a),u=r,k=m["".concat(s,".").concat(u)]||m[u]||c[u]||l;return a?n.createElement(k,i(i({ref:t},d),{},{components:a})):n.createElement(k,i({ref:t},d))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=m;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:r,i[1]=p;for(var o=2;o<l;o++)i[o]=a[o];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},377:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>l,metadata:()=>p,toc:()=>o});var n=a(7462),r=(a(7294),a(3905));const l={id:"linux-package-installation"},i="Linux Package Installation",p={unversionedId:"dependencies/linux-package-installation",id:"dependencies/linux-package-installation",title:"Linux Package Installation",description:"VirtualClient has the goal of supporting all platforms and specifics with relative ease. It should work, out of the box.",source:"@site/docs/dependencies/linux-package-installation.md",sourceDirName:"dependencies",slug:"/dependencies/linux-package-installation",permalink:"/VirtualClient/docs/dependencies/linux-package-installation",draft:!1,editUrl:"https://github.com/microsoft/VirtualClient/edit/main/website/docs/dependencies/linux-package-installation.md",tags:[],version:"current",frontMatter:{id:"linux-package-installation"},sidebar:"tutorialSidebar",previous:{title:"Java JDK Installation",permalink:"/VirtualClient/docs/dependencies/java-jdk"},next:{title:"Monitors",permalink:"/VirtualClient/docs/category/monitors"}},s={},o=[{value:".NET Supported Linux Distributions",id:"net-supported-linux-distributions",level:2},{value:"Supported package management and corresponding distro",id:"supported-package-management-and-corresponding-distro",level:3},{value:"Define LinuxPackageInstallation dependency",id:"define-linuxpackageinstallation-dependency",level:3},{value:"Example: Packages that have the same name across distros",id:"example-packages-that-have-the-same-name-across-distros",level:3},{value:"Example: Packages that have different names across package managers",id:"example-packages-that-have-different-names-across-package-managers",level:3},{value:"Example: Packages that have different names across different Linux distros",id:"example-packages-that-have-different-names-across-different-linux-distros",level:3},{value:"Example: Packages that require specific repositories",id:"example-packages-that-require-specific-repositories",level:3},{value:"Example: Packages that require repositories specific to a given Linux distro",id:"example-packages-that-require-repositories-specific-to-a-given-linux-distro",level:3},{value:"Mapping: Common Packages used in VC",id:"mapping-common-packages-used-in-vc",level:3}],d={toc:o};function c(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"linux-package-installation"},"Linux Package Installation"),(0,r.kt)("p",null,"VirtualClient has the goal of supporting all platforms and specifics with relative ease. It should work, out of the box.\nInstalling a package is easy. Installing packages on different platforms and package managers is not.\nVC encapsulates the complex logic of handling package installation on different distros into a single component that users can easily use in profiles."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://wiki.debian.org/AptCLI"},"Package Manager Apt"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/rpm-software-management/dnf"},"Package Manager Dnf"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"http://yum.baseurl.org/"},"Package Manager Yum"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://en.opensuse.org/Portal:Zypper"},"Package Manager Zypper"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://www.linode.com/docs/guides/linux-package-management-overview/"},"A good Third-party intro"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://pkgs.org/"},"Website to search for packages"),"  "),(0,r.kt)("h2",{id:"net-supported-linux-distributions"},".NET Supported Linux Distributions"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/dotnet/core/blob/main/release-notes/6.0/supported-os.md"},"https://github.com/dotnet/core/blob/main/release-notes/6.0/supported-os.md")),(0,r.kt)("p",null,"VirtualClient runs on .NET 6. It should run on any distribution supported by .NET 6."),(0,r.kt)("h3",{id:"supported-package-management-and-corresponding-distro"},"Supported package management and corresponding distro"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Package Manager"),(0,r.kt)("th",{parentName:"tr",align:null},"Distributions"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"apt"),(0,r.kt)("td",{parentName:"tr",align:null},"Debian, Ubuntu")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dnf"),(0,r.kt)("td",{parentName:"tr",align:null},"CentOS/RHEL8, Mariner, Fedora")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"yum"),(0,r.kt)("td",{parentName:"tr",align:null},"CentOS/RHEL7")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"zypper"),(0,r.kt)("td",{parentName:"tr",align:null},"OpenSUSE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"None"),(0,r.kt)("td",{parentName:"tr",align:null},"Flatcar")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Note: If your distro is supported, it doesn't mean all workload and profiles are properly defined and tested in your distro.\nThe \"SupportedDistribuitons\" parameter will show the distribution that are tested by VC team and users. Please feel free to test in your environment and contribute to the profiles.\nIt is also possible that some workloads or dependencies just doesn't work on specific distros, even though VC and other workloads support them.")),(0,r.kt)("h3",{id:"define-linuxpackageinstallation-dependency"},"Define LinuxPackageInstallation dependency"),(0,r.kt)("p",null,"LinuxPackageInstallation is a dependency class that handles the complexity of installing different packages on different Linux distributions.",(0,r.kt)("br",{parentName:"p"}),"\n",'TLDR: The packages that will install on your system are "Packages" + "Packages Specific to your package manager" + "Packages Specific to your distro".',(0,r.kt)("br",{parentName:"p"}),"\n",'For example: if you are on Ubuntu. Packages = "Packages"+"Packages-Apt"+"Packages-Ubuntu".'),(0,r.kt)("h3",{id:"example-packages-that-have-the-same-name-across-distros"},"Example: Packages that have the same name across distros"),(0,r.kt)("p",null,"This is the simplest case. The package is well-known and all package manager have the same name for the package, in default repo.\nLife is simple."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "Type": "LinuxPackageInstallation",\n    "Parameters": {\n        "Packages": "make,openssl"\n    }\n}\n')),(0,r.kt)("h3",{id:"example-packages-that-have-different-names-across-package-managers"},"Example: Packages that have different names across package managers"),(0,r.kt)("p",null,"If the packages are directly available in the default repositories, users only need to fill in the corresponding package names, in the different package manager.\nYou need to repeat it for other package management because the name could be different in different package manager.\nThe following is example for libaio, which is used in FIO tests."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "Type": "LinuxPackageInstallation",\n    "Parameters": {\n        "Packages-Apt": "libaio1,libaio-dev",\n        "Packages-Dnf": "libaio,libaio-devel",\n        "Packages-Yum": "libaio,libaio-devel",\n        "Packages-Zypper": "libaio1,libaio-dev"\n    }\n}\n')),(0,r.kt)("h3",{id:"example-packages-that-have-different-names-across-different-linux-distros"},"Example: Packages that have different names across different Linux distros"),(0,r.kt)("p",null,"There are packages that has different names/paths in different distributions. It follows the convention of ",(0,r.kt)("em",{parentName:"p"},"Packages-Distro"),".\nThe following example is for Atop. Apt and Zypper have them in default repository, however Redhat decided to put them in EPEL repo and not as default.",(0,r.kt)("br",{parentName:"p"}),"\n","However, please note that in actual installation, epel-release and atop can't be installed in the same command.\nEpel-release needs to be installed first, so this is separated into two LinuxPackageInstallation."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "Type": "LinuxPackageInstallation",\n    "Parameters": {\n        "Packages-RHEL8": "https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm",\n        "Packages-RHEL7": "https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm",\n        "Packages-CentOS7": "epel-release",\n        "Packages-Apt": "atop",\n        "Packages-Dnf": "atop",\n        "Packages-Yum": "atop",\n        "Packages-Zypper": "atop"\n    }\n}\n')),(0,r.kt)("h3",{id:"example-packages-that-require-specific-repositories"},"Example: Packages that require specific repositories"),(0,r.kt)("p",null,"There are packages that are not available in the default repositories. Thus VC needs to add them to the system. Due to how package manager works, they are intrinsicly packageManager specific.\nIt follows the convention of ",(0,r.kt)("em",{parentName:"p"},"Repositories-PackageManager"),". "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "Type": "LinuxPackageInstallation",\n    "Parameters": {\n        "Repositories-Apt": "ppa:ubuntu-toolchain-r/test",\n        "Packages-Apt": "gcc-10",\n        "Packages-Dnf": "gcc-toolset-10",\n        "Packages-Yum": "gcc-toolset-10",\n        "Packages-Zypper": "gcc10"\n    }\n}\n')),(0,r.kt)("h3",{id:"example-packages-that-require-repositories-specific-to-a-given-linux-distro"},"Example: Packages that require repositories specific to a given Linux distro"),(0,r.kt)("p",null,"There are packages that are not available in the default repositories. Thus VC needs to add them to the system. What makes it worse is that those repository could be distro-version specific.\nFor these scenarios, LinuxPackageInstallation class supports definition of distro-specific extra repository. It follows the convention of ",(0,r.kt)("em",{parentName:"p"},"Repositories-Distro"),".\nLuckily so far VC does not use those packages in current workloads. However, those things do exist."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "Type": "LinuxPackageInstallation",\n    "Parameters": {\n        "Repositories-RHEL8": "RHEL8.repo, IWillUpdateWhenIHaveARealExample",\n        "Repositories-RHEL7": "RHEL7.repo, IWillUpdateWhenIHaveARealExample",\n        "Packages-Apt": "somePackage",\n        "Packages-Dnf": "somePackage",\n        "Packages-Yum": "somePackage",\n        "Packages-Zypper": "somePackage"\n    }\n}\n')),(0,r.kt)("h3",{id:"mapping-common-packages-used-in-vc"},"Mapping: Common Packages used in VC"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Package"),(0,r.kt)("th",{parentName:"tr",align:null},"apt"),(0,r.kt)("th",{parentName:"tr",align:null},"dnf"),(0,r.kt)("th",{parentName:"tr",align:null},"yum"),(0,r.kt)("th",{parentName:"tr",align:null},"zypper"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"atop"),(0,r.kt)("td",{parentName:"tr",align:null},"atop"),(0,r.kt)("td",{parentName:"tr",align:null},"atop(extra package)"),(0,r.kt)("td",{parentName:"tr",align:null},"atop(extra package)"),(0,r.kt)("td",{parentName:"tr",align:null},"atop")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"automake"),(0,r.kt)("td",{parentName:"tr",align:null},"automake"),(0,r.kt)("td",{parentName:"tr",align:null},"automake"),(0,r.kt)("td",{parentName:"tr",align:null},"automake"),(0,r.kt)("td",{parentName:"tr",align:null},"automake")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bison"),(0,r.kt)("td",{parentName:"tr",align:null},"bison"),(0,r.kt)("td",{parentName:"tr",align:null},"bison"),(0,r.kt)("td",{parentName:"tr",align:null},"bison"),(0,r.kt)("td",{parentName:"tr",align:null},"bison")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"byacc"),(0,r.kt)("td",{parentName:"tr",align:null},"byacc"),(0,r.kt)("td",{parentName:"tr",align:null},"byacc"),(0,r.kt)("td",{parentName:"tr",align:null},"byacc"),(0,r.kt)("td",{parentName:"tr",align:null},"byacc")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cmake"),(0,r.kt)("td",{parentName:"tr",align:null},"cmake"),(0,r.kt)("td",{parentName:"tr",align:null},"cmake"),(0,r.kt)("td",{parentName:"tr",align:null},"cmake"),(0,r.kt)("td",{parentName:"tr",align:null},"cmake")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"gcc"),(0,r.kt)("td",{parentName:"tr",align:null},"gcc"),(0,r.kt)("td",{parentName:"tr",align:null},"gcc"),(0,r.kt)("td",{parentName:"tr",align:null},"gcc"),(0,r.kt)("td",{parentName:"tr",align:null},"gcc")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"gcc-11"),(0,r.kt)("td",{parentName:"tr",align:null},"gcc-11"),(0,r.kt)("td",{parentName:"tr",align:null},"gcc-toolset-11"),(0,r.kt)("td",{parentName:"tr",align:null},"centos-release-scl-rh,devtoolset-11-gcc"),(0,r.kt)("td",{parentName:"tr",align:null},"gcc11")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"libaio"),(0,r.kt)("td",{parentName:"tr",align:null},"libaio1"),(0,r.kt)("td",{parentName:"tr",align:null},"libaio"),(0,r.kt)("td",{parentName:"tr",align:null},"libaio"),(0,r.kt)("td",{parentName:"tr",align:null},"libaio1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"libaio-dev"),(0,r.kt)("td",{parentName:"tr",align:null},"libaio-dev"),(0,r.kt)("td",{parentName:"tr",align:null},"libaio-devel"),(0,r.kt)("td",{parentName:"tr",align:null},"libaio-devel"),(0,r.kt)("td",{parentName:"tr",align:null},"libaio-dev")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"make"),(0,r.kt)("td",{parentName:"tr",align:null},"make"),(0,r.kt)("td",{parentName:"tr",align:null},"make"),(0,r.kt)("td",{parentName:"tr",align:null},"make"),(0,r.kt)("td",{parentName:"tr",align:null},"make")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nvidia-driver"),(0,r.kt)("td",{parentName:"tr",align:null},"nvidia-common"),(0,r.kt)("td",{parentName:"tr",align:null},"nvidia-driver"),(0,r.kt)("td",{parentName:"tr",align:null},"nvidia-driver"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://software.opensuse.org/package/nvidia-driver"},"N/A"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mpich"),(0,r.kt)("td",{parentName:"tr",align:null},"mpich"),(0,r.kt)("td",{parentName:"tr",align:null},"mpich"),(0,r.kt)("td",{parentName:"tr",align:null},"mpich"),(0,r.kt)("td",{parentName:"tr",align:null},"mpich")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"python3-pip"),(0,r.kt)("td",{parentName:"tr",align:null},"python3-pip"),(0,r.kt)("td",{parentName:"tr",align:null},"python3-pip"),(0,r.kt)("td",{parentName:"tr",align:null},"python3-pip"),(0,r.kt)("td",{parentName:"tr",align:null},"python3-pip")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sshpass"),(0,r.kt)("td",{parentName:"tr",align:null},"sshpass"),(0,r.kt)("td",{parentName:"tr",align:null},"sshpass"),(0,r.kt)("td",{parentName:"tr",align:null},"sshpass"),(0,r.kt)("td",{parentName:"tr",align:null},"sshpass")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"stress-ng"),(0,r.kt)("td",{parentName:"tr",align:null},"stress-ng"),(0,r.kt)("td",{parentName:"tr",align:null},"stress-ng"),(0,r.kt)("td",{parentName:"tr",align:null},"stress-ng"),(0,r.kt)("td",{parentName:"tr",align:null},"stress-ng")))))}c.isMDXComponent=!0}}]);