"use strict";(self.webpackChunkvirtualclient=self.webpackChunkvirtualclient||[]).push([[2562],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>k});var r=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,o=function(e,t){if(null==e)return{};var a,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var c=r.createContext({}),s=function(e){var t=r.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var a=e.components,o=e.mdxType,n=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(a),k=o,m=d["".concat(c,".").concat(k)]||d[k]||u[k]||n;return a?r.createElement(m,i(i({ref:t},p),{},{components:a})):r.createElement(m,i({ref:t},p))}));function k(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=a.length,i=new Array(n);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var s=2;s<n;s++)i[s]=a[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}d.displayName="MDXCreateElement"},5947:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>n,metadata:()=>l,toc:()=>s});var r=a(7462),o=(a(7294),a(3905));const n={},i="Run Commercial Workloads: Bring Your Own Package",l={unversionedId:"guides/0030-commercial-workloads",id:"guides/0030-commercial-workloads",title:"Run Commercial Workloads: Bring Your Own Package",description:'Virtual Client supports running commercial workloads. However, we can not distribute the binary and licenses for the commercial workloads. In those cases, users need to "bring their own binary and license".',source:"@site/docs/guides/0030-commercial-workloads.md",sourceDirName:"guides",slug:"/guides/0030-commercial-workloads",permalink:"/VirtualClient/docs/guides/0030-commercial-workloads",draft:!1,editUrl:"https://github.com/microsoft/VirtualClient/edit/main/website/docs/guides/0030-commercial-workloads.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Client/Server Support",permalink:"/VirtualClient/docs/guides/0020-client-server"},next:{title:"Data/Telemetry Support",permalink:"/VirtualClient/docs/guides/0040-telemetry"}},c={},s=[{value:"Supported commercial workloads",id:"supported-commercial-workloads",level:2},{value:"Supporting Commercial Workloads",id:"supporting-commercial-workloads",level:2},{value:"Step 1: VirtualClient Downloads Your Package",id:"step-1-virtualclient-downloads-your-package",level:2},{value:".vcpkg file",id:"vcpkg-file",level:3},{value:"Prepare your package",id:"prepare-your-package",level:3},{value:"Upload your package to some storage",id:"upload-your-package-to-some-storage",level:3},{value:"Add package download to your VC profile",id:"add-package-download-to-your-vc-profile",level:3},{value:"Let VirtualClient discover your local packages",id:"let-virtualclient-discover-your-local-packages",level:2},{value:"Put packages in the packages directory with .vcpkg file.",id:"put-packages-in-the-packages-directory-with-vcpkg-file",level:3},{value:"Define alternative package directory using environment variable",id:"define-alternative-package-directory-using-environment-variable",level:3}],p={toc:s};function u(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,r.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"run-commercial-workloads-bring-your-own-package"},"Run Commercial Workloads: Bring Your Own Package"),(0,o.kt)("p",null,'Virtual Client supports running commercial workloads. However, we can not distribute the binary and licenses for the commercial workloads. In those cases, users need to "bring their own binary and license".'),(0,o.kt)("p",null,":::warn\n",(0,o.kt)("em",{parentName:"p"},"The Virtual Client team is currently working to define and document the process for integration of commercial workloads into the Virtual Client.\nThe contents of this document are NOT complete and are meant only to illustrate the basic concepts. Please bear with us while we are figuring this\nprocess out."),"\n:::"),(0,o.kt)("h2",{id:"supported-commercial-workloads"},"Supported commercial workloads"),(0,o.kt)("p",null,"The following workloads are commercial (requiring purchase and/or license) software supported by the Virtual Client."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"/VirtualClient/docs/workloads/geekbench/"},"Geekbench"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"/VirtualClient/docs/workloads/speccpu/"},"SPECcpu"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"/VirtualClient/docs/workloads/specjbb/"},"SPECjbb"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"/VirtualClient/docs/workloads/specpower/"},"SPECpower")),"  ")),(0,o.kt)("h2",{id:"supporting-commercial-workloads"},"Supporting Commercial Workloads"),(0,o.kt)("p",null,"The following sections describe how the process of integrating commercial workloads into the Virtual Client works. With commercial workloads, the user must\nhave purchased the software or the license and have created a VC package for integration with the runtime platform. The following steps describe how this typically\ncomes together."),(0,o.kt)("h2",{id:"step-1-virtualclient-downloads-your-package"},"Step 1: VirtualClient Downloads Your Package"),(0,o.kt)("h3",{id:"vcpkg-file"},".vcpkg file"),(0,o.kt)("p",null,".vcpkg is just a json file in vcpkg extension, that VC uses to register package information. While in many cases this file is optional, it is\nhighly recommended to make a .vcpkg file when preparing your own package. The file has one required property ",(0,o.kt)("inlineCode",{parentName:"p"},"name"),", and optional properties"),(0,o.kt)("p",null,"This example vcpkg file "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "lshw",\n    "description": "Hardware lister for Linux toolset.",\n    "version": "B.02.19.59",\n    "metadata": {\n        "commit": "https://github.com/lyonel/lshw/commit/996aaad9c760efa6b6ffef8518999ec226af049a",\n        "tags": "pre-release"\n    }\n}\n')),(0,o.kt)("h3",{id:"prepare-your-package"},"Prepare your package"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"There are generally two types of packages: Post-compile, and others (pre-compile/no-compile-needed)."),(0,o.kt)("li",{parentName:"ul"},"Post-compile packages are generally OS or architecture specific, they need to be in their "),(0,o.kt)("li",{parentName:"ul"},"The package structure could be workload-specific, refer to the workload documentation to see the packaging instructions.")),(0,o.kt)("h3",{id:"upload-your-package-to-some-storage"},"Upload your package to some storage"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Right now VC only supports Azure Storage Account"),(0,o.kt)("li",{parentName:"ul"},"We are open to support other major storage services. ",(0,o.kt)("strong",{parentName:"li"},"Contributions welcomed!"))),(0,o.kt)("h3",{id:"add-package-download-to-your-vc-profile"},"Add package download to your VC profile"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'```json\n{\n  "Type": "DependencyPackageInstallation",\n  "Parameters": {\n    "Scenario": "InstallSPECcpuWorkloadPackage",\n    "BlobContainer": "packages",\n    "BlobName": "speccpu.2017.1.1.8.zip",\n    "PackageName": "speccpu2017",\n    "Extract": true\n  }\n}\n```\n')),(0,o.kt)("h2",{id:"let-virtualclient-discover-your-local-packages"},"Let VirtualClient discover your local packages"),(0,o.kt)("h3",{id:"put-packages-in-the-packages-directory-with-vcpkg-file"},"Put packages in the packages directory with .vcpkg file."),(0,o.kt)("p",null,"User also have the option to put in workload packages under ",(0,o.kt)("inlineCode",{parentName:"p"},"virtualclient/packages")," directory. Any directory with a ",(0,o.kt)("inlineCode",{parentName:"p"},".vcpkg")," inside will be registered as a VC package."),(0,o.kt)("h3",{id:"define-alternative-package-directory-using-environment-variable"},"Define alternative package directory using environment variable"),(0,o.kt)("p",null,"A user of the Virtual Client can define an environment variable called ",(0,o.kt)("strong",{parentName:"p"},"VCDependenciesPath"),". This directory will be used\nto discover packages with the highest priority. If a package is not defined here, the Virtual Client will look for the package in the\nlocations noted below. If a package is found in this location, Virtual Client will not search for other locations. The package found\nhere will be used."),(0,o.kt)("p",null,"  Package parent directory names should ALWAYS be lower-cased (e.g. geekbench5 vs. Geekbench5)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"e.g.\nset VCDependenciesPath=C:\\any\\custom\\packages\\location\n\nC:\\any\\custom\\packages\\location\\geekbench5\nC:\\any\\custom\\packages\\location\\geekbench5\\linux-x64\nC:\\any\\custom\\packages\\location\\geekbench5\\linux-arm64\nC:\\any\\custom\\packages\\location\\geekbench5\\win-x64\nC:\\any\\custom\\packages\\location\\geekbench5\\win-arm64\n")))}u.isMDXComponent=!0}}]);